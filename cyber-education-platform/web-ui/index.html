<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CEDRIK Labs</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="src/styles.css" />
  </head>
  <body>
    <div class="launch-notification" id="launchNotification">
      <div class="icon">ğŸš€</div>
      <div class="title">Launching in Kali...</div>
      <div class="message">Opening scenario in Firefox</div>
    </div>

    <div class="container-fluid">
      <header>
        <div style="position: absolute; top: 20px; left: 20px">
          <button
            onclick="window.location.href='http://localhost:5173'"
            style="
              padding: 10px 20px;
              background: rgba(255, 255, 255, 0.2);
              color: white;
              border: 2px solid white;
              border-radius: 8px;
              cursor: pointer;
              font-weight: bold;
              transition: all 0.3s;
              backdrop-filter: blur(10px);
            "
            onmouseover="this.style.background='rgba(255,255,255,0.3)'"
            onmouseout="this.style.background='rgba(255,255,255,0.2)'"
          >
            â† Back to CEDRIK
          </button>
        </div>
        <h1>ğŸ” CEDRIK Labs</h1>
        <h2>Cybersecurity Education through Dynamic Responsive Integrated Knowledge</h2>
        <p class="subtitle">Scenarios auto-launch in Kali Firefox with AI guidance</p>
      </header>

      <div class="container">
        <!-- <div class="stats-bar">
          <div class="stat-item">
            <div class="stat-value" id="totalScenarios">6</div>
            <div class="stat-label">Scenarios</div>
          </div>
          <div class="stat-item">
            <div class="stat-value" id="completedExercises">0</div>
            <div class="stat-label">Completed</div>
          </div>
          <div class="stat-item">
            <div class="stat-value" id="totalSkills">0</div>
            <div class="stat-label">Skills</div>
          </div>
        </div> -->

        <div class="row g-4 mb-5" id="scenariosGrid">
          <div class="col-12">
            <div class="loading">Loading scenarios...</div>
          </div>
        </div>
      </div>
    </div>

    <div class="modal" id="labModal">
      <div class="modal-content">
        <span class="close-modal" onclick="closeModal()">&times;</span>
        <h2 id="modalTitle">Loading...</h2>

        <div class="lab-container">
          <div class="vnc-section">
            <div class="vnc-container" id="vncContainer">
              <div class="vnc-header">
                <div class="vnc-title">
                  ğŸ–¥ï¸ Kali Linux Desktop - Scenario Auto-Launched!
                </div>
                <div class="vnc-controls">
                  <!-- <button class="vnc-btn" onclick="toggleScaling()">
                    Toggle Scaling
                  </button> -->
                  <button class="vnc-btn fullscreen" onclick="toggleFullscreen()">
                    â›¶ Fullscreen
                  </button>
                </div>
              </div>
              <div class="connection-status" id="connectionStatus">Connecting...</div>
              <div class="vnc-frame-wrapper">
                <iframe
                  id="vncFrame"
                  src="about:blank"
                  allow="fullscreen"
                  allowfullscreen="true"
                ></iframe>
              </div>
            </div>
          </div>

          <div class="exercise-sidebar" id="exerciseSidebar">
            <div class="progress-bar-container">
              <div class="progress-bar-header">
                <span class="progress-bar-title">ğŸ“Š Progress</span>
                <span class="progress-percentage" id="progressPercentage">0%</span>
              </div>
              <div class="progress-bar-track">
                <div
                  class="progress-bar-fill"
                  id="progressBarFill"
                  style="width: 0%"
                ></div>
              </div>
              <div class="progress-stats">
                <!-- <span id="progressCompleted">0 of 0 completed</span> -->
                <span id="progressRemaining">0 remaining</span>
              </div>
            </div>
            <h3>ğŸ“‹ Exercises</h3>
            <div class="exercise-list" id="exerciseList"></div>
          </div>

          <div class="ai-chat-section">
            <div class="chat-header">
              ğŸ¤– AI Team Assistant
              <span class="agents-indicator">(2 specialized agents)</span>
              <!-- <button class="knowledge-browser-btn" onclick="openKnowledgeBrowser()">
  ğŸ“š Browse Knowledge Base
</button> -->
            </div>
            <div class="chat-messages" id="chatMessages"></div>
            <div class="chat-input">
              <input
                type="text"
                id="chatInput"
                placeholder="Ask for help from our AI team..."
              />
              <button onclick="sendMessage()" id="sendButton">Send to Team</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="knowledge-modal" id="knowledgeModal">
      <div class="knowledge-modal-content">
        <span class="close-modal" onclick="closeKnowledgeModal()">&times;</span>
        <h2>ğŸ“š Knowledge Base Browser</h2>

        <div class="knowledge-search">
          <input
            type="text"
            id="knowledgeSearchInput"
            placeholder="Search for vulnerabilities, tools, techniques..."
          />
          <button onclick="searchKnowledge()">ğŸ” Search</button>
        </div>

        <div class="knowledge-categories">
          <button class="category-btn active" onclick="filterCategory('all')">All</button>
          <button class="category-btn" onclick="filterCategory('vulnerability')">
            Vulnerabilities
          </button>
          <button class="category-btn" onclick="filterCategory('tool')">Tools</button>
          <button class="category-btn" onclick="filterCategory('scenario')">
            Scenarios
          </button>
        </div>

        <div class="knowledge-results" id="knowledgeResults">
          <div style="text-align: center; color: #666">Loading knowledge base...</div>
        </div>
      </div>
    </div>

    <script type="module" src="src/main.js"></script>
  </body>
</html>
